
<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head" />
<body class="">
    <div id="page-wrapper">
        <div class="container">
            <!-- Header -->
            <div id="header-wrapper" th:replace="fragments/header" />



            <div id="content" class="full-body">
                <!--             <div class="container"> -->
                <!--                 <div th:replace="fragments/topbar" /> -->
                <div class="row">
                    <p class="alert alert-danger" th:if="${errors != null}">
                           <th:block th:each="error : ${errors}" > <span  th:text="${error.defaultMessage}" /><br /> </th:block>
                     </p>
                </div>
                <div class="row">

                    <div class="col-md-12">
                        <!-- Content -->
                        <div class="content">

                            <!-- SENTENCE -->
                            <form th:if="${dayForm.sentence != null}" th:object="${dayForm}" method="post">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h2>Type in sentence and choose how do You feel about it</h2>
                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-md-9">

                                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                        <div class="form-group">

                                            <input th:field="*{sentence}" class="form-control" type="text"></input>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <select th:name="${'sentenceStatus'}" class="form-control">
                                                <option th:value="${s.key}" th:each="s : ${status}" th:text="${s.key}"
                                                    th:selected="${s.key == dayForm.sentenceStatus}" />
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>You can add additional note to share with others</label>
                                    <textarea class="form-control" name="note" th:text="${dayForm.note}"></textarea>
                                </div>
                                <input type="submit" class="btn btn-success" value="Submit" />
                            </form>


                            <!-- WORDS -->
                            <form th:if="${dayForm.words != null}" th:object="${dayForm}" method="post">
                                <div class="form-group">
                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                </div>
                                <h2>Type in six words and choose how do You feel about them</h2>

                                <div class="form-group" th:each="i : ${#numbers.sequence( 0, 5)}">

                                    <div class="row">
                                        <div class="col-md-9">
                                            <div style="position: relative;">
                                                <input type="text" th:id="${'word'+i}" class="form-control sugesstionAutocomplete" th:name="${'words['+i+']'}"
                                                    th:value="${dayForm.words.get(i)}" autocomplete="off" />
                                                <div class="list-group wordList" th:id="${'word'+i+'_list'}"
                                                    style="display: none; position: absolute; z-index: 10000;"></div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">

                                            <select th:name="${'wordsStatuses['+i+']'}" class="form-control">
                                                <option th:value="${s.key}" th:each="s: ${status}" th:text="${s.value}"
                                                    th:selected="${s.key == dayForm.wordsStatuses.get(i)}" />
                                            </select>
                                        </div>
                                    </div>

                                </div>




                                <div class="form-group">
                                    <label>You can add additional note to share with others</label>
                                    <textarea class="form-control" name="note" th:text="${dayForm.note}"></textarea>
                                </div>
                                <script type="text/javascript">
																																	// <![CDATA[
																																	$(
																																			document)
																																			.ready(
																																					function() {
																																						$(
																																								".sugesstionAutocomplete")
																																								.on(
																																										"keyup",
																																										function(
																																												e) {
																																											if (e.keyCode >= 46
																																													&& e.keyCode <= 90
																																													|| e.keyCode == 8) {
																																												value = $(
																																														this)
																																														.val();
																																												$(
																																														this)
																																														.val(
																																																value);
																																												$
																																														.get(
																																																"/sugestions?letters="
																																																		+ value,
																																																function(
																																																		data) {
																																																	var text = $(
																																																			data,
																																																			"p")
																																																			.text();
																																																	words = JSON
																																																			.parse(text);
																																																	inputid = $(
																																																			this)
																																																			.attr(
																																																					"id");
																																																	var id = "#"
																																																			+ inputid
																																																			+ '_list';
																																																	$(
																																																			id)
																																																			.html(
																																																					"");
																																																	var html = "";
																																																	for (word in words) {
																																																		html += '<a href="javascript:void(0)" data-parent="'
																																																				+ inputid
																																																				+ '" class="list-group-item" >'
																																																				+ words[word]
																																																				+ '</a>';
																																																	}
																																																	$(
																																																			id)
																																																			.html(
																																																					html);
																																																	$(
																																																			".wordList")
																																																			.hide();
																																																	$(
																																																			id)
																																																			.show()
																																																	$(
																																																			".wordList a")
																																																			.click(
																																																					function() {
																																																						var parent = $(
																																																								this)
																																																								.attr(
																																																										"data-parent");
																																																						var word = $(
																																																								this)
																																																								.text();
																																																						$(
																																																								"#"
																																																										+ parent)
																																																								.val(
																																																										word);
																																																						$(
																																																								this)
																																																								.parent()
																																																								.html(
																																																										"")
																																																						$(
																																																								this)
																																																								.parent()
																																																								.hide();
																																																					})
																																																}
																																																		.bind(this));
																																											}
																																										})

																																					})
																																	// ]]>
																																</script>

                                <br /> <br /> <input type="submit" class="btn btn-success" value="Submit" />
                            </form>



                        </div>
                        <!-- Sidebar -->


                    </div>
                </div>
            </div>





            <!-- Footer -->
            <div id="footer-wrapper" th:replace="fragments/footer" />
        </div>
    </div>

    <!-- Scripts -->
    <script th:replace="fragments/scripts" />

</body>
</html>