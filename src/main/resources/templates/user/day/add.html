<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head" />
<body class="right-sidebar">
    <div id="page-wrapper">

        <!-- Header -->
        <div id="header-wrapper" th:replace="fragments/header" />

        <!-- Main -->
        <div id="main-wrapper">
            <div id="main" class="container">
                <div class="row">
    <h1 th:text="${currentUser.options.get('inputType')}"></h1>
                    <!-- Content -->
                    <div id="content" class="8u 12u(mobile)">



                <!-- SENTENCE -->
                <form th:if="${currentUser.options.get('inputType') eq 'SENTENCE'}" th:object="${form}" method="post">
                <div class="row">
    <div class="9u">
    
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" /> <input th:field="*{sentence}" type="text"></input> 
                    </div>
                   <div class="3u"> 
                    <select
                        th:field="*{sentenceStatus}">
                        <option value="POSITIVE">POSITIVE</option>
                        <option value="NEUTRAL">NEUTRAL</option>
                        <option value="NEGATIVE">NEGATIVE</option>
                    </select><br /> <br /> 
                    </div>
                    </div>
                    <input type="submit" class="btn btn-success" value="Submit" />
                </form>


                <!-- WORDS -->
                <form th:if="${currentUser.options.get('inputType') eq 'WORDS'}" th:object="${form}" method="post">
                    <div class="form-group">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    </div>
                    <h2>Type in six words and choose how do You feel about them</h2>
                    <h3>Day <span th:text="${date}"></span></h3>
                    <div class="form-group" th:each="i : ${#numbers.sequence( 0, 5)}">
                        
                        <div class="row">
                            <div class="9u">
                                <div style="position:relative;">
                                <input type="text" th:id="${'word'+i}" class="form-control sugesstionAutocomplete" th:name="${'words['+i+']'}"   autocomplete="off" />
                                    <div class="list-group wordList"  th:id="${'word'+i+'_list'}" style="display:none;position:absolute;z-index:10000;">
                                    </div>
                                </div>
                            </div>
                            <div class="3u">
                                <select th:name="${'wordsStatuses['+i+']'}">
                                    <option value="POSITIVE">POSITIVE</option>
                                    <option value="NEUTRAL">NEUTRAL</option>
                                    <option value="NEGATIVE">NEGATIVE</option>
                                </select>
                            </div>
                        </div>





                    </div>
                    <script type="text/javascript">
                    // <![CDATA[
                    $(document).ready(function() {
                        $(".sugesstionAutocomplete").on("keyup", function(e) {
                            if (e.keyCode >= 46 && e.keyCode <= 90 || e.keyCode == 8) {
                            	value = $(this).val();
                            	$(this).val(value);
                                $.get("/sugestions?letters=" + value , function(data) {
                                    var text = $(data, "p").text();
                                    words = JSON.parse(text);
                                    inputid = $(this).attr("id");
                                    var id = "#"+inputid+'_list';
                                    $(id).html("");
                                    var html = "";
                                	for (word in words){
                                		html += '<a href="javascript:void(0)" data-parent="'+inputid+'" class="list-group-item" >'+words[word]+'</a>';
                                	}
                                    $(id).html(html);
                                    $(id).show()
                                    $(".wordList a").click(function(){
                                    	var parent = $(this).attr("data-parent");
                                    	var word = $(this).text();
                                    	$("#"+parent).val(word);
                                    	$(this).parent().html("")
                                    	$(this).parent().hide();
                                    })	
                                }.bind(this));
                            }
                        })
                        
                      

                    })
                    // ]]>
					</script>
                    
                    <br />
                    <br /> <input type="submit" class="btn btn-success" value="Submit" />
                </form>
            
            
         </div>

                    <!-- Sidebar -->
                    <div id="sidebar" class="4u 12u(mobile)" th:replace="fragments/sidebar " />

                </div>
            </div>
        </div>

        <!-- Footer -->
        <div id="footer-wrapper" th:replace="fragments/footer" />

    </div>

    <!-- Scripts -->
    <script th:replace="fragments/scripts" />

</body>
</html>    